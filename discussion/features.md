# RAPID Features

Discussion results from virtual offsite on 2020-11-12.

## Model

| OData Feature                                                                                                 | RAPID Equivalent                                                                                                                                                                            | State                                                              |
| ------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ |
| Schema Namespaces                                                                                             | one per file via `namespace ...`                                                                                                                                                            | &check;                                                            |
| Schema Alias                                                                                                  | :x:, locally defined types are referenced without qualifier                                                                                                                                 | &check;                                                            |
| Include Namespace w/ alias                                                                                    | `include "..." as ...`                                                                                                                                                                      | &check;                                                            |
| Include Annotation                                                                                            | :x:                                                                                                                                                                                         |                                                                    |
| Entity Types                                                                                                  | `type ...`                                                                                                                                                                                  | &check;                                                            |
| Complex Types                                                                                                 | `type ...`                                                                                                                                                                                  | &check;                                                            |
| Key-less entity types for singletons and to-one containment                                                   | `type ...`, no field annotated as `@key`                                                                                                                                                    | &check;                                                            |
| Inheritance                                                                                                   | :heavy_plus_sign: `type Foo: Bar {...}` or similar, https://github.com/oasis-open/odata-rapid/issues/159                                                                                    |
| Abstract Structured Types                                                                                     | :heavy_plus_sign: `@abstract type ...`, https://github.com/oasis-open/odata-rapid/issues/160                                                                                                |
| Open Structured Types                                                                                         | implicitly always open, no directive needed                                                                                                                                                 |
| Media Entity Types                                                                                            | :x:, use `Edm.Stream`                                                                                                                                                                       |
| Default values for properties (and parameters?)                                                               | :x:                                                                                                                                                                                         |
| Referential Constraints                                                                                       | :x:, are always hidden                                                                                                                                                                      |
| Partner Navigation ("backlink")                                                                               | :x:, too fancy                                                                                                                                                                              |
| OnDelete                                                                                                      | :x:, too fancy                                                                                                                                                                              |
| Enumeration Types                                                                                             | `enum ...`                                                                                                                                                                                  | &check;                                                            |
| Flags Enum Type                                                                                               | :heavy_plus_sign: `flags { yellow striped }`, position in definition assigns bit in internal representation, https://github.com/oasis-open/odata-rapid/issues/158                           | &check; [#157](https://github.com/oasis-open/odata-rapid/pull/157) |
| Enum Member Value                                                                                             | :x:, also no names for combined values                                                                                                                                                      |
| Primitive Types (Binary, Decimal, Duration, Geo\*, Guid, Integer variants, Stream, TimeOfDay, Abstract Types) | via qualified name `Edm.Xxx`                                                                                                                                                                |
| more "built-in" shortcuts for primitive types?                                                                | :heavy_plus_sign: not Guid, not abstract types, not Geo\*, no integer variants, https://github.com/oasis-open/odata-rapid/issues/161                                                        |
| Primitive Type Facets                                                                                         | :heavy_plus_sign: optional paren suffix: `Decimal(precision,scale)`, `String(maxlength)`, meaning of "no suffix" is up to the service, https://github.com/oasis-open/odata-rapid/issues/162 |
| Unicode facet for strings                                                                                     | :x:, always Unicode                                                                                                                                                                         |
| SRID facet for Geo\*                                                                                          | :x:, too fancy, use defaults                                                                                                                                                                |
| Type Definitions                                                                                              | :x:, maybe later, e.g. `scalar Foo: String(42)`                                                                                                                                             |
| Function Overloads by non-binding parameters                                                                  | :x:                                                                                                                                                                                         |
| Action/Function Imports                                                                                       | action foo(){...} and function foo(){...} definitions nested inside service defintion                                                                                                      |
| Unbound Actions/Functions without "Import"                                                                    | :x:, only useful for query (`$filter`) expressions, too fancy                                                                                                                               |
| Composable Function                                                                                           | every function is composable                                                                                                                                                                |
| Entity Set Path                                                                                               | :x:, too fancy                                                                                                                                                                              |
| Extending an Entity Container                                                                                 | :x:, too fancy                                                                                                                                                                              |
| Navigation Property Bindings                                                                                  | only implicit, maybe RAPID can use CSDL for the multiple entity-sets per type cases or return `@context` in case of doubt                                                                   | &check;                                                            |
| Terms                                                                                                         | :x:, maybe later, for now just use annotations from existing vocabularies                                                                                                                   |
| Annotations                                                                                                   | :question: first figure out representation, then decide, use `@Validation.AllowedValues` as the litmus test, [#164](https://github.com/oasis-open/odata-rapid/issues/164)                   | in progress                                                        |

## Query

| (OData) Feature                          | RAPID Equivalent                                                                                                |
| ---------------------------------------- | --------------------------------------------------------------------------------------------------------------- |
| \$metadata                               | yes, only CSDL JSON or RSDL, https://github.com/oasis-open/odata-rapid/issues/155                               |
| key-as-segment                           | yes                                                                                                             |
| paren-keys                               | :x: (can be added atop the profile)                                                                             |
| alternate keys                           | :x:, requires paren-keys                                                                                        |
| `/$count`                                | yes, don't describe it initially                                                                                |
| `/$value`                                | :x:, we don't have media entities                                                                               |
| `$levels`, `$expand=*`, `$select=*`      | :x:, be explicit                                                                                                |
| `$apply`                                 | :x:, too fancy                                                                                                  |
| `$compute`                               | :x:, too fancy                                                                                                  |
| `$filter`                                | only subset, see ???                                                                                            |
| `$search`                                | :x:, maybe later a subset (no parens, OR, NOT, only implicit AND)                                               |
| `$orderby`                               | only subset (no expressions, no computed fields)                                                                |
| `$top`, `$skip`, `$count`                | yes                                                                                                             |
| Requesting Related Entities              | yes, path syntax                                                                                                |
| `/$ref` for requesting Entity References | :x:, too fancy                                                                                                  |
| Resolving an Entity-Id                   | :x:, too fancy                                                                                                  |
| (bound) functions                        | _initially_ only implicit parameter aliases `GET /func?param=42`, only literal parameter values, no expressions |
| Delta Responses                          | :x:, too fancy                                                                                                  |
| `/$crossjoin`                            | :x:, too fancy                                                                                                  |
| `/$all`                                  | :x:, too fancy                                                                                                  |
| Filter capabilities                      | https://github.com/oasis-open/odata-rapid/issues/30                                                             |
| Query Fragments and Persisted Queries    | https://github.com/oasis-open/odata-rapid/issues/145                                                            |

## Modification

| OData Feature                     | RAPID Equivalent                                                             |
| --------------------------------- | ---------------------------------------------------------------------------- |
| Basic POST(create), PATCH, DELETE | yes                                                                          |
| PUT                               | :x:, only PATCH                                                              |
| Deep Insert                       | yes                                                                          |
| Deep Update/Upsert                | :x:                                                                          |
| PATCH to entity set               | :x:, maybe later with simplified tombstones (`@removed` plus key properties) |
| Batch                             | advanced feature, only JSON Batch                                            |
| `/$filter(...)`, `/$each`         | :x:, too fancy                                                               |
| (bound) actions                   | yes                                                                          |
| Asynchronous Requests             | :x:, too fancy                                                               |
