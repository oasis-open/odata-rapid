"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[771],{1529:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return R},default:function(){return C},frontMatter:function(){return b},metadata:function(){return N},toc:function(){return x}});var r=n(7462),i=n(3366),o=n(7294),a=n(3905),l=n(5068),s=n(2562),u=n(1532),p=n(1315),c=n(1262),d=function(e){function t(t){var n;(n=e.call(this,t)||this).updateQueryResults=function(){var e=n.editor.getUrl();n.setState({queryUrl:e}),n.fetchResults(e)},n.setToDefault=function(){n.editor.setUrl(n.props.defaultQuery),n.setState({queryUrl:n.props.defaultQuery}),n.fetchResults(n.props.defaultQuery)};var r=new AbortController;return n.editor=null,n.state={queryUrl:n.props.defaultQuery,responseElement:o.createElement(p.Z,{className:"language-json"},"[Loading]"),controller:r,signal:r.signal},n}(0,l.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.editor=this.props.initUrlEditor(document.getElementById(this.props.id)),this.editor.setUrl(this.props.defaultQuery);this.editor.updateSchema("\n    type Company\n    {\n        stockSymbol: String\n        name: String\n        incorporated: Date\n        employees: [Employee]\n    }\n\n    type Employee\n    {\n        key id: Integer\n        firstName: String\n        lastName: String\n        title: String\n    }\n    \n    service {\n        company: Company\n        competitors: [Company]\n    }"),this.fetchResults(this.props.defaultQuery)},n.componentWillUnmount=function(){this.state.controller.abort()},n.fetchResults=function(e){var t=this,n=this.formatQuery(e),r=this.state.signal;fetch("https://jetsons.azurewebsites.net/"+n,{signal:r}).then((function(e){return e.text()})).then((function(e){"The page cannot be displayed because an internal server error has occurred."===e?e="This query is not valid; please try a different query.":(e=JSON.parse(e),e=JSON.stringify(e,null,4));var n=o.createElement(p.Z,{className:"language-json"},e);t.setState({responseElement:n})})).catch((function(e){console.error(e)}))},n.formatQuery=function(e){for(var t="",n=0;n<e.length-1;n++){var r=e.charAt(n);t+=r,"?"!=r&&"("!=r&&"&"!=r&&";"!=r||"$"==e.charAt(n+1)||(t+="$")}return t+=e.charAt(e.length-1)},n.render=function(){return o.createElement("div",null,o.createElement(m,{updateQueryResults:this.updateQueryResults,setToDefault:this.setToDefault,id:this.props.id}),o.createElement(h,{results:this.state.responseElement}))},t}(o.Component),m=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this;return o.createElement(o.Fragment,null,o.createElement("p",null,o.createElement("strong",null,"Example Query:")),o.createElement(s.Z,null,o.createElement(s.Z.Text,{style:{paddingRight:"0"}},"GET /"),o.createElement("div",{className:"query-editor",id:this.props.id}),o.createElement(u.Z,{variant:"outline-primary",onClick:function(){return e.props.updateQueryResults()}},"Get Result"),o.createElement(u.Z,{style:{borderLeft:"none"},variant:"outline-secondary",onClick:function(){return e.props.setToDefault()}},"Revert")))},t}(o.Component),h=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){return o.createElement("div",{style:{paddingTop:"1rem",paddingBottom:"1rem"}},o.createElement("p",null,o.createElement("strong",null,"Result:")),this.props.results)},t}(o.Component),y=function(e){return o.createElement(c.Z,null,(function(){var t=n(2616).initUrlEditor;return o.createElement(d,(0,r.Z)({},e,{initUrlEditor:t}))}))},f=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){return o.createElement("div",null,o.createElement(s.Z,{style:{paddingBottom:"1rem"}},o.createElement(s.Z.Text,null,this.props.command," ",this.props.query)))},t}(o.Component),g=f,k=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){return o.createElement("div",null,o.createElement("p",null,o.createElement("strong",null,"Template:")),o.createElement(g,{command:this.props.command,query:this.props.query}))},t}(o.Component),v=k,T=["components"],b={id:"rapid-read",title:"Reading Resources",sidebar_label:"Reading Resources"},R=void 0,N={unversionedId:"rapid-read",id:"rapid-read",title:"Reading Resources",description:"Retrieving a Resource",source:"@site/../docs/rapid-pro-read.md",sourceDirName:".",slug:"/rapid-read",permalink:"/docs/rapid-read",editUrl:"https://github.com/oasis-open/odata-rapid/edit/main/docs/../docs/rapid-pro-read.md",tags:[],version:"current",frontMatter:{id:"rapid-read",title:"Reading Resources",sidebar_label:"Reading Resources"},sidebar:"docs",previous:{title:"Overview",permalink:"/docs/spec/features"},next:{title:"Modifying Resources",permalink:"/docs/rapid-edit"}},x=[{value:"Retrieving a Resource",id:"retrieving-a-resource",children:[{value:"Selecting Individual Properties of a Resource",id:"selecting-individual-properties-of-a-resource",children:[],level:3},{value:"Including Related Resources",id:"including-related-resources",children:[],level:3}],level:2},{value:"Retrieving a Collection of Resources",id:"retrieving-a-collection-of-resources",children:[{value:"Retrieving an Individual Member of a Collection",id:"retrieving-an-individual-member-of-a-collection",children:[],level:3},{value:"Selecting Individual Properties of Collection Members",id:"selecting-individual-properties-of-collection-members",children:[],level:3},{value:"Requesting a Range of Members",id:"requesting-a-range-of-members",children:[],level:3},{value:"Ordering Results",id:"ordering-results",children:[],level:3},{value:"Filtering Results",id:"filtering-results",children:[],level:3}],level:2},{value:"Combining Query Options",id:"combining-query-options",children:[],level:2},{value:"Passing Query Strings in the Body",id:"passing-query-strings-in-the-body",children:[],level:2}],q={toc:x};function C(e){var t=e.components,n=(0,i.Z)(e,T);return(0,a.kt)("wrapper",(0,r.Z)({},q,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"retrieving-a-resource"},"Retrieving a Resource"),(0,a.kt)("p",null,"RAPID services support retrieving a resource using the GET method, then returning it as a json object."),(0,a.kt)(v,{command:"GET",query:"{resource-path}",mdxType:"TemplateRequest"}),(0,a.kt)(y,{defaultQuery:"company",id:"1",mdxType:"InteractiveQuerying"}),(0,a.kt)("p",null,"RAPID responses are self-describing.\nThe first line says that the response is described by the ",(0,a.kt)("inlineCode",{parentName:"p"},"company")," singleton defined in the ",(0,a.kt)("inlineCode",{parentName:"p"},"$metadata")," resource.\nThe ",(0,a.kt)("inlineCode",{parentName:"p"},"$metadata")," resource may be represented as a relative or absolute URL."),(0,a.kt)("p",null,"RAPID uses properties prefixed with the ",(0,a.kt)("inlineCode",{parentName:"p"},"@")," symbol to denote control information that is not part of the data."),(0,a.kt)("p",null,"RAPID payloads use native JSON types for string, boolean, and double values.\nDates, Times, and DateTimeOffset values are represented as ISO-8601 strings."),(0,a.kt)("h3",{id:"selecting-individual-properties-of-a-resource"},"Selecting Individual Properties of a Resource"),(0,a.kt)("p",null,"The client can select individual properties of the resource using the ",(0,a.kt)("inlineCode",{parentName:"p"},"select")," option:"),(0,a.kt)(v,{command:"GET",query:"{resource-path}?select={propertyName,\u2026}",mdxType:"TemplateRequest"}),(0,a.kt)(y,{defaultQuery:"company?select=name,stockSymbol",id:"2",mdxType:"InteractiveQuerying"}),(0,a.kt)("p",null,"The first line says that only the ",(0,a.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"stockSymbol")," properties are selected to be returned from the ",(0,a.kt)("inlineCode",{parentName:"p"},"company")," resource."),(0,a.kt)("h3",{id:"including-related-resources"},"Including Related Resources"),(0,a.kt)("p",null,"Related resources can be retrieved as nested resources through the ",(0,a.kt)("inlineCode",{parentName:"p"},"expand")," query option."),(0,a.kt)(v,{command:"GET",query:"{collection-resource-path}?expand={navigationProperty,\u2026}",mdxType:"TemplateRequest"}),(0,a.kt)(y,{defaultQuery:"company?expand=employees",id:"3",mdxType:"InteractiveQuerying"}),(0,a.kt)("p",null,"The context property specifies that the ",(0,a.kt)("inlineCode",{parentName:"p"},"employees")," are expanded within the ",(0,a.kt)("inlineCode",{parentName:"p"},"company"),".\nBecause the next link refers to the nested ",(0,a.kt)("inlineCode",{parentName:"p"},"employees")," property, the ",(0,a.kt)("inlineCode",{parentName:"p"},"nextLink")," property is prefixed with the name of the nested property."),(0,a.kt)("p",null,"When expanding related resources,\nyou can express the same options for the related resource that you can for any other resource path."),(0,a.kt)(v,{command:"GET",query:"{collection-resource-path}?expand={navigationProp(queryOptions),\u2026}",mdxType:"TemplateRequest"}),(0,a.kt)(y,{defaultQuery:"company?expand=employees(select=firstName)",id:"4",mdxType:"InteractiveQuerying"}),(0,a.kt)("h2",{id:"retrieving-a-collection-of-resources"},"Retrieving a Collection of Resources"),(0,a.kt)("p",null,"RAPID services return collections of resources as a JSON array:                                              "),(0,a.kt)(v,{command:"GET",query:"{collection-resource-path}",mdxType:"TemplateRequest"}),(0,a.kt)(y,{defaultQuery:"company/employees",id:"5",mdxType:"InteractiveQuerying"}),(0,a.kt)("p",null,"If the result is large, the service may include a next link to tell the client that there are more items in the collection.\nThe value of the next link is an opaque URL that the client can use to retrieve the next set of resources from the collection.\nThe absence of the next link signals the client that they have retrieved all of the resources in the collection."),(0,a.kt)("h3",{id:"retrieving-an-individual-member-of-a-collection"},"Retrieving an Individual Member of a Collection"),(0,a.kt)("p",null,"Individual members of a collection can be identified by appending the key to the URL of the collection."),(0,a.kt)(v,{command:"GET",query:"{collection-resource-path}/{key}",mdxType:"TemplateRequest"}),(0,a.kt)(y,{defaultQuery:"company/employees/2",id:"6",mdxType:"InteractiveQuerying"}),(0,a.kt)("p",null,"Here the context property specifies that the result is an individual resource within the ",(0,a.kt)("inlineCode",{parentName:"p"},"employees")," collection of the ",(0,a.kt)("inlineCode",{parentName:"p"},"company"),"."),(0,a.kt)("h3",{id:"selecting-individual-properties-of-collection-members"},"Selecting Individual Properties of Collection Members"),(0,a.kt)("p",null,"Query options are composable;\nthe client can select a subset of properties to be returned for each instance in the collection."),(0,a.kt)(v,{command:"GET",query:"{collection-resource-path}?select={propertyName,\u2026}",mdxType:"TemplateRequest"}),(0,a.kt)(y,{defaultQuery:"company/employees?select=lastName",id:"7",mdxType:"InteractiveQuerying"}),(0,a.kt)("h3",{id:"requesting-a-range-of-members"},"Requesting a Range of Members"),(0,a.kt)("p",null,"The client can use ",(0,a.kt)("inlineCode",{parentName:"p"},"skip")," and/or ",(0,a.kt)("inlineCode",{parentName:"p"},"top")," query options to select a range of resources within a collection.\nThey can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"count")," query option to request the count of all resources in the collection."),(0,a.kt)(v,{command:"GET",query:"{collection-resource-path}?skip={int}",mdxType:"TemplateRequest"}),(0,a.kt)(g,{command:"GET",query:"{collection-resource-path}?top={int}",mdxType:"Request"}),(0,a.kt)(g,{command:"GET",query:"{collection-resource-path}?count=true",mdxType:"Request"}),(0,a.kt)(y,{defaultQuery:"company/employees?skip=1&top=2&count=true",id:"8",mdxType:"InteractiveQuerying"}),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"skip")," option is used to specify how many members at the beginning of a collection to ignore; ",(0,a.kt)("inlineCode",{parentName:"p"},"top")," refers to how many members to return from the beginning of the remaining collection. Therefore, in this example, the result skips the first member and returns the next two."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"@count")," property denotes the total number of resources in the collection, and is not affected by ",(0,a.kt)("inlineCode",{parentName:"p"},"skip")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"top"),".\nThere is no next link because all two of the requested resources are returned."),(0,a.kt)("h3",{id:"ordering-results"},"Ordering Results"),(0,a.kt)("p",null,"The client can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"orderby")," query option to order the results returned within a collection."),(0,a.kt)(v,{command:"GET",query:"{collection-resource-path}?orderby={propertyName [asc \\| desc],\u2026}",mdxType:"TemplateRequest"}),(0,a.kt)(y,{defaultQuery:"company/employees?orderby=lastName asc, id desc",id:"9",mdxType:"InteractiveQuerying"}),(0,a.kt)("p",null,"Null values sort before non-null values in ascending order and after non-null values in descending order."),(0,a.kt)("p",null,"If ",(0,a.kt)("inlineCode",{parentName:"p"},"asc")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"desc")," is not specified, the default ordering is ascending."),(0,a.kt)("h3",{id:"filtering-results"},"Filtering Results"),(0,a.kt)("p",null,"The client can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"filter")," query option to filter the results returned from the collection."),(0,a.kt)(v,{command:"GET",query:"{collection-resource-path}?filter={filter-expression}",mdxType:"TemplateRequest"}),(0,a.kt)(y,{defaultQuery:"company/employees?filter=lastName eq 'Jetson'",id:"10",mdxType:"InteractiveQuerying"}),(0,a.kt)("p",null,"In this case, there is no next link since all of the resources matching the filter predicate were returned inline."),(0,a.kt)("p",null,"There is a full expression language to describe what the client can express in the filter.\nFor more information, see ",(0,a.kt)("a",{parentName:"p",href:"/docs/spec/expressionlang"},"RAPID Expression Language")),(0,a.kt)("h2",{id:"combining-query-options"},"Combining Query Options"),(0,a.kt)("p",null,"Query options can be combined using the ampersand (",(0,a.kt)("inlineCode",{parentName:"p"},"&"),").\nTo comply with URL parsing rules, query options within an expand clause are separated using semi-colons (",(0,a.kt)("inlineCode",{parentName:"p"},";"),").\nThe order of query options is not significant."),(0,a.kt)(v,{command:"GET",query:"{resource-path}?select={propertyName,\u2026}&expand={navigationProperty(queryOptions),\u2026}",mdxType:"TemplateRequest"}),(0,a.kt)(y,{defaultQuery:"/company?select=name&expand=employees(select=firstName;filter=lastName eq 'Jetson')",id:"11",mdxType:"InteractiveQuerying"}),(0,a.kt)("h2",{id:"passing-query-strings-in-the-body"},"Passing Query Strings in the Body"),(0,a.kt)("p",null,"Don't like long query strings? No problem!\nRAPID allows you to pass the query string in the body, making it easy to write and format as text.\nThe target is still the resource being queried or modified, making it easy to route the request,\nand the syntax is the same, making it easy to execute."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Template"),(0,a.kt)("th",{parentName:"tr",align:"left"},"POST {single-resource-path}/\\$query"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"td"},"Example")),(0,a.kt)("td",{parentName:"tr",align:"left"},"POST ",(0,a.kt)("inlineCode",{parentName:"td"},"http://rapid-pro.org/company/$query"))))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Body:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"select=name\n&expand=employees(\n            select=firstName;\n            filter=lastName eq 'Jetson')\n")))}C.isMDXComponent=!0}}]);